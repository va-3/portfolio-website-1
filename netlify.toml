[build]
  publish = "."
  command = "echo 'Static site - no build needed'"

[build.environment]
  NODE_VERSION = "20.11.0"
  # Use Focal (Ubuntu 20.04) build image to avoid mise entirely
  # Noble (Ubuntu 24.04) uses mise which causes build hangs
  BUILD_IMAGE = "focal"

  # Legacy environment variables (kept for backwards compatibility)
  MISE_DISABLED = "1"
  MISE_SKIP_INSTALL = "1"
  MISE_IDIOMATIC_VERSION_FILE = "false"
  MISE_PYTHON_INSTALL = "false"
  MISE_RUBY_INSTALL = "false"
  MISE_GO_INSTALL = "false"

[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"

# PDF serving optimization
[[headers]]
  for = "/images/vishnu-a-resume.pdf"
  [headers.values]
    Content-Type = "application/pdf"
    Cache-Control = "public, max-age=31536000, immutable"
    Content-Disposition = "inline; filename=\"vishnu-a-resume.pdf\""
